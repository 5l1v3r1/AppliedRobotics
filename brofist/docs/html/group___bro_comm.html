<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>BROFist: BROFist Internal Communication Protocol</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BROFist Internal Communication Protocol<br/>
<small>
[<a class="el" href="group___b_r_o_fist_server.html">BROFistServer</a>]</small>
</h1>
<p>This module controls the internal communication (the one done via internal sockets).  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bro_comm.html#ga7fa314c91710130869c2d4ba31f4ac77">bro_start_server</a> (int *server_sock, int *client_sock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the server by making it listen on a local socket for a communication by the client.  <a href="#ga7fa314c91710130869c2d4ba31f4ac77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bro_comm.html#ga2f7cfb1ee0291e76edde0288f71dc02c">bro_server_fist</a> (const <a class="el" href="structbro__fist__t.html">bro_fist_t</a> *input_fist, <a class="el" href="structbro__fist__t.html">bro_fist_t</a> *out_fist, int scicos_sock, int spam_sock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">bro_server_fist is the function that receives the Operational Fists from the  <a href="#ga2f7cfb1ee0291e76edde0288f71dc02c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___bro_comm.html#ga1686032e099ddba351e93ec6ec6f6b4f">bro_stop_server</a> (int server_sock, int client_sock)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the server, normally called on finalization.  <a href="#ga1686032e099ddba351e93ec6ec6f6b4f"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This module controls the internal communication (the one done via internal sockets). </p>
<p>This communication may be between the BROFist server and SciCos blocks or another "ad hoc" client. It is achieved via the usage of UNIX sockets and some other powerful tricks. Please refer to the man page of <code>socket</code>. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga2f7cfb1ee0291e76edde0288f71dc02c"></a><!-- doxytag: member="bro_comm.h::bro_server_fist" ref="ga2f7cfb1ee0291e76edde0288f71dc02c" args="(const bro_fist_t *input_fist, bro_fist_t *out_fist, int scicos_sock, int spam_sock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bro_server_fist </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structbro__fist__t.html">bro_fist_t</a> *&nbsp;</td>
          <td class="paramname"> <em>input_fist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structbro__fist__t.html">bro_fist_t</a> *&nbsp;</td>
          <td class="paramname"> <em>out_fist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>scicos_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>spam_sock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>bro_server_fist is the function that receives the Operational Fists from the </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>input_fist*</em>&nbsp;</td><td>Array containing the operations to send to the SPAM. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>output_fist*</em>&nbsp;</td><td>Array containing the responses for the sent operations. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scicos_sock</em>&nbsp;</td><td>Socket Descriptor for the client connection. Normally is the <code>client_sock</code> returned by <a class="el" href="group___bro_comm.html#ga7fa314c91710130869c2d4ba31f4ac77" title="Start the server by making it listen on a local socket for a communication by the...">bro_start_server()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>spam_sock</em>&nbsp;</td><td>Socket Descriptor for the SPAM connection. Normally is the <code>spam_sock</code> returned by the <a class="el" href="group___bro_b_t.html#ga3782811f033f57a69b10be399da70207" title="Connect to the given device.">bro_bt_connect_device()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Result of the operation </dd></dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the connection was succesful. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if there were problems in the connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If there were errors with the connection then <code>errno</code> will be set accordingly to the return values listed on the <code>"man 2
        connect"</code> page. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7fa314c91710130869c2d4ba31f4ac77"></a><!-- doxytag: member="bro_comm.h::bro_start_server" ref="ga7fa314c91710130869c2d4ba31f4ac77" args="(int *server_sock, int *client_sock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bro_start_server </td>
          <td>(</td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>server_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>client_sock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start the server by making it listen on a local socket for a communication by the client. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>server_sock</em>&nbsp;</td><td>Server's socket descriptor. This value is used only at the end (please refer to <a class="el" href="group___bro_comm.html#ga1686032e099ddba351e93ec6ec6f6b4f" title="Stop the server, normally called on finalization.">bro_stop_server()</a>) to close the socket. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>client_sock</em>&nbsp;</td><td>Client's socket (Scicos or another application) descriptor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Result of the operation </dd></dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the connection was succesful. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if there were problems in the connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If there were errors with the connection then <code>errno</code> will be set accordingly to the return values listed on the <code>"man 2
        connect"</code> page. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1686032e099ddba351e93ec6ec6f6b4f"></a><!-- doxytag: member="bro_comm.h::bro_stop_server" ref="ga1686032e099ddba351e93ec6ec6f6b4f" args="(int server_sock, int client_sock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bro_stop_server </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>server_sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>client_sock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop the server, normally called on finalization. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>server_sock</em>&nbsp;</td><td>The server socket descriptor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>client_sock</em>&nbsp;</td><td>The client socket descriptor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Result of the operation </dd></dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>if the connection was succesful. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if there were problems in the connection. </td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>If there were errors with the connection then <code>errno</code> will be set accordingly to the return values listed on the <code>"man 2
        connect"</code> page. </dd></dl>

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sat Aug 21 12:09:01 2010 for BROFist by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
