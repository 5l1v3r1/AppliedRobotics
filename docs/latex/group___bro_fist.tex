\hypertarget{group___bro_fist}{
\section{BROFist Generic Data Types and Defines}
\label{group___bro_fist}\index{BROFist Generic Data Types and Defines@{BROFist Generic Data Types and Defines}}
}


This module declares the common data types for the project.  


\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structbro__fist__t}{bro\_\-fist\_\-t}
\begin{DoxyCompactList}\small\item\em The structure containing a \char`\"{}Fist\char`\"{} for the SPAM. \item\end{DoxyCompactList}\item 
struct \hyperlink{structbro__spam__fists__t}{bro\_\-spam\_\-fists\_\-t}
\begin{DoxyCompactList}\small\item\em The structure containing BUFFER\_\-SIZE BROFists to send to the SPAM. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group___bro_fist_ga6312573a3fccab201c412ad9ba7bafe6}{SERVER\_\-PATH}~\char`\"{}/tmp/BROFist\char`\"{}
\begin{DoxyCompactList}\small\item\em Server path for the UNIX socket. \item\end{DoxyCompactList}\item 
\#define \hyperlink{group___bro_fist_ga6b20d41d6252e9871430c242cb1a56e7}{BUFFER\_\-SIZE}~7
\begin{DoxyCompactList}\small\item\em Number of simultaneous operations to send/recv. \item\end{DoxyCompactList}\item 
\#define \hyperlink{group___bro_fist_ga2bd586ea01c91051e9db186c12f4464b}{BRO\_\-END\_\-COMMUNICATION}~255
\begin{DoxyCompactList}\small\item\em The value that has to be sent to stop the server. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga49e05497cd12a38a0a1a78675025e3c7}{
\#define \hyperlink{group___bro_fist_ga49e05497cd12a38a0a1a78675025e3c7}{MOTOR\_\-A}~5}
\label{group___bro_fist_ga49e05497cd12a38a0a1a78675025e3c7}

\begin{DoxyCompactList}\small\item\em Integer representation for Port A. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_gadd9a1e9dd6c4b0439da68e819a6a5c39}{
\#define \hyperlink{group___bro_fist_gadd9a1e9dd6c4b0439da68e819a6a5c39}{MOTOR\_\-B}~6}
\label{group___bro_fist_gadd9a1e9dd6c4b0439da68e819a6a5c39}

\begin{DoxyCompactList}\small\item\em Integer representation for Port B. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_gacb6257980674f294ceabf61e0245770f}{
\#define \hyperlink{group___bro_fist_gacb6257980674f294ceabf61e0245770f}{MOTOR\_\-C}~7}
\label{group___bro_fist_gacb6257980674f294ceabf61e0245770f}

\begin{DoxyCompactList}\small\item\em Integer representation for Port C. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga381df6cc2c92e7935057f010fe949326}{
\#define \hyperlink{group___bro_fist_ga381df6cc2c92e7935057f010fe949326}{PORT\_\-1}~1}
\label{group___bro_fist_ga381df6cc2c92e7935057f010fe949326}

\begin{DoxyCompactList}\small\item\em Integer representation for Port 1. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga64e474e5f8be468f8ec13a9869dd54d4}{
\#define \hyperlink{group___bro_fist_ga64e474e5f8be468f8ec13a9869dd54d4}{PORT\_\-2}~2}
\label{group___bro_fist_ga64e474e5f8be468f8ec13a9869dd54d4}

\begin{DoxyCompactList}\small\item\em Integer representation for Port 2. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga04e76d8b6ae75c91eebf40147d8ef2d9}{
\#define \hyperlink{group___bro_fist_ga04e76d8b6ae75c91eebf40147d8ef2d9}{PORT\_\-3}~3}
\label{group___bro_fist_ga04e76d8b6ae75c91eebf40147d8ef2d9}

\begin{DoxyCompactList}\small\item\em Integer representation for Port 3. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_gaaf1ce903d30a30c201b6ead4ec0c112b}{
\#define \hyperlink{group___bro_fist_gaaf1ce903d30a30c201b6ead4ec0c112b}{PORT\_\-4}~4}
\label{group___bro_fist_gaaf1ce903d30a30c201b6ead4ec0c112b}

\begin{DoxyCompactList}\small\item\em Integer representation for Port 4. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_gaa207b28106c699a9fdd622dfd17ea6ca}{
\#define \hyperlink{group___bro_fist_gaa207b28106c699a9fdd622dfd17ea6ca}{LIGHT\_\-SENSOR}~1}
\label{group___bro_fist_gaa207b28106c699a9fdd622dfd17ea6ca}

\begin{DoxyCompactList}\small\item\em Integer representation for Light Sensor. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga07dfd45c90480d3fe7e3087b27fbae30}{
\#define \hyperlink{group___bro_fist_ga07dfd45c90480d3fe7e3087b27fbae30}{TOUCH\_\-SENSOR}~2}
\label{group___bro_fist_ga07dfd45c90480d3fe7e3087b27fbae30}

\begin{DoxyCompactList}\small\item\em Integer representation for Touch Sensor. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga1d947f2b23c11298bc35257662b889d3}{
\#define \hyperlink{group___bro_fist_ga1d947f2b23c11298bc35257662b889d3}{SOUND\_\-SENSOR}~3}
\label{group___bro_fist_ga1d947f2b23c11298bc35257662b889d3}

\begin{DoxyCompactList}\small\item\em Integer representation for Sound Sensor. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_gaa4c23c22caf8a93547a5ba985d60a933}{
\#define \hyperlink{group___bro_fist_gaa4c23c22caf8a93547a5ba985d60a933}{RADAR\_\-SENSOR}~4}
\label{group___bro_fist_gaa4c23c22caf8a93547a5ba985d60a933}

\begin{DoxyCompactList}\small\item\em Integer representation for Ultrasonic Distance Sensor. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_gae2b68429d85a4e53be661aa29f5fad81}{
\#define \hyperlink{group___bro_fist_gae2b68429d85a4e53be661aa29f5fad81}{TACHO\_\-COUNT}~6}
\label{group___bro_fist_gae2b68429d85a4e53be661aa29f5fad81}

\begin{DoxyCompactList}\small\item\em Integer representation for RAW Tachometric Count. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga102b03f1e7083e6ec238c864fc438e18}{
\#define \hyperlink{group___bro_fist_ga102b03f1e7083e6ec238c864fc438e18}{AVG\_\-SPEED}~7}
\label{group___bro_fist_ga102b03f1e7083e6ec238c864fc438e18}

\begin{DoxyCompactList}\small\item\em Integer representation for Computed Average Speed. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga4653087e4d2deccaf2f685236780eacf}{
\#define \hyperlink{group___bro_fist_ga4653087e4d2deccaf2f685236780eacf}{SET\_\-SPEED}~8}
\label{group___bro_fist_ga4653087e4d2deccaf2f685236780eacf}

\begin{DoxyCompactList}\small\item\em Integer representation for Set PID Controlled Speed. \item\end{DoxyCompactList}\item 
\hypertarget{group___bro_fist_ga7235481a21fc46d0534161c40cb10ee5}{
\#define \hyperlink{group___bro_fist_ga7235481a21fc46d0534161c40cb10ee5}{SET\_\-POWER}~9}
\label{group___bro_fist_ga7235481a21fc46d0534161c40cb10ee5}

\begin{DoxyCompactList}\small\item\em Integer representation for Set RAW Power. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This module declares the common data types for the project. It also defines the values of the various operations implemented in BROFist and the encoding for the 7 NXT ports.\hypertarget{group___bro_fist_BroOperations}{}\subsection{Implemented Operations:}\label{group___bro_fist_BroOperations}
There are 8 types of operations, the first 6 are used to request the values of sensors:
\begin{DoxyItemize}
\item {\ttfamily LIGHT\_\-SENSOR:} Used to request the value of a Light Sensor. The sensor's value will be a number spanning from 0 to 1023. However, every kind of test highlighted that the \char`\"{}realistic\char`\"{} values will span between 400 and 700. This is due to the vicinity of the led to the sensor.
\item {\ttfamily TOUCH\_\-SENSOR:} Used to request the value of a Touch Sensor. The sensor's value will be either 1, if the sensor is \char`\"{}touching\char`\"{} something, or 0, if it's not \char`\"{}touching\char`\"{} anything.
\item {\ttfamily SOUND\_\-SENSOR:} Used to request the value of a Sound Sensor. The sensor's value will be a number spanning from 0 to 1023, the lower the value, the higher the sound.
\item {\ttfamily RADAR\_\-SENSOR:} Used to request the value of an Ultrasonic Sensor for Distance. The sensor's value will be a number spanning from 1 to 255, which are the centimeters of distance between the sensor and an obstacle in front of it.
\item {\ttfamily TACHO\_\-COUNT:} Used to request the value of the revolution count in degree of a Servo Motor.
\item {\ttfamily AVG\_\-SPEED:} Used to request the average speed in Degree per second of a Servo Motor.
\end{DoxyItemize}

The last 2 are used to set the speed or the power for Servo Motors:
\begin{DoxyItemize}
\item {\ttfamily SET\_\-POWER:} Used to set the RAW power for a Servo Motor.
\item {\ttfamily SET\_\-SPEED:} Used to set the Speed in Degree per Second for a Servo Motor. This speed is controlled by the PID Controller implemented inside the Client for the SPAM. For this, please refer to the update\_\-powers() function.
\end{DoxyItemize}\hypertarget{group___bro_fist_FutureImp}{}\subsubsection{Future Improvements}\label{group___bro_fist_FutureImp}
Since the nxtOSEK team sometimes releases new features the system is open for new implementations, such as the RS485 control. BROFists can be easily improved by adding a new operation and then modifying the decode\_\-bro\_\-input() function in spam/BRO\_\-spam\_\-fist.c file.\hypertarget{group___bro_fist_BroFistStruct}{}\subsection{The TRUE BROFists}\label{group___bro_fist_BroFistStruct}
The BROfist system uses defined structures to send operations and ports to the SPAM. This is useful since it eases the implementations of future features, since every function that works with Fists uses methods to dinamically update its value based on the dimension of a \hyperlink{structbro__fist__t}{bro\_\-fist\_\-t}. 

\subsection{Define Documentation}
\hypertarget{group___bro_fist_ga2bd586ea01c91051e9db186c12f4464b}{
\index{BroFist@{BroFist}!BRO\_\-END\_\-COMMUNICATION@{BRO\_\-END\_\-COMMUNICATION}}
\index{BRO\_\-END\_\-COMMUNICATION@{BRO\_\-END\_\-COMMUNICATION}!BroFist@{BroFist}}
\subsubsection[{BRO\_\-END\_\-COMMUNICATION}]{\setlength{\rightskip}{0pt plus 5cm}\#define BRO\_\-END\_\-COMMUNICATION~255}}
\label{group___bro_fist_ga2bd586ea01c91051e9db186c12f4464b}


The value that has to be sent to stop the server. 

Will there be ever more than 10 operations? XD \hypertarget{group___bro_fist_ga6b20d41d6252e9871430c242cb1a56e7}{
\index{BroFist@{BroFist}!BUFFER\_\-SIZE@{BUFFER\_\-SIZE}}
\index{BUFFER\_\-SIZE@{BUFFER\_\-SIZE}!BroFist@{BroFist}}
\subsubsection[{BUFFER\_\-SIZE}]{\setlength{\rightskip}{0pt plus 5cm}\#define BUFFER\_\-SIZE~7}}
\label{group___bro_fist_ga6b20d41d6252e9871430c242cb1a56e7}


Number of simultaneous operations to send/recv. 

This has been set as 7 since the ports on the NXT are 7. For further insight on this issue, please read \hyperlink{group___b_r_o_cos_comm_Why7}{Why only 7 requests?}. \hypertarget{group___bro_fist_ga6312573a3fccab201c412ad9ba7bafe6}{
\index{BroFist@{BroFist}!SERVER\_\-PATH@{SERVER\_\-PATH}}
\index{SERVER\_\-PATH@{SERVER\_\-PATH}!BroFist@{BroFist}}
\subsubsection[{SERVER\_\-PATH}]{\setlength{\rightskip}{0pt plus 5cm}\#define SERVER\_\-PATH~\char`\"{}/tmp/BROFist\char`\"{}}}
\label{group___bro_fist_ga6312573a3fccab201c412ad9ba7bafe6}


Server path for the UNIX socket. 

